function t(){return fetch("http://localhost:3000/movies").then(t=>{if(!t.ok)throw Error("помилка отримання фільмів");return t.json()})}function e(t,e){e.innerHTML="",t.forEach(t=>{let n=document.createElement("tr");n.innerHTML=`
        <td>${t.id}</td>
        <td>${t.title}</td>
        <td>${t.genre}</td>
        <td>${t.director}</td>
        <td>${t.year}</td>
        <td>
          <button class="updateBtn" data-id="${t.id}">\u{41E}\u{43D}\u{43E}\u{432}\u{438}\u{442}\u{438} (PUT)</button>
          <button class="editBtn" data-id="${t.id}">\u{420}\u{435}\u{434}\u{430}\u{433}\u{443}\u{432}\u{430}\u{442}\u{438} (PATCH)</button>
          <button class="deleteBtn" data-id="${t.id}">\u{412}\u{438}\u{434}\u{430}\u{43B}\u{438}\u{442}\u{438} (DELETE)</button>
        </td>
      `,e.appendChild(n)})}!function(){let n=document.getElementById("getMoviesBtn"),o=document.querySelector("#moviesTable tbody");n.addEventListener("click",()=>{t().then(t=>e(t,o)).catch(t=>console.error(t))})}(),function(){let n=document.getElementById("addMovieForm"),o=document.querySelector("#moviesTable tbody");n.addEventListener("submit",r=>{r.preventDefault();let d=new FormData(n);fetch("http://localhost:3000/movies",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:d.get("title"),genre:d.get("genre"),director:d.get("director"),year:Number(d.get("year"))})}).then(t=>{if(!t.ok)throw Error("Ошибка добавления фильма");return t.json()}).then(()=>t()).then(t=>e(t,o)).catch(t=>console.error(t))})}(),function(){let n=document.querySelector("#moviesTable tbody");n.addEventListener("click",o=>{if(o.target.classList.contains("updateBtn")){let r=o.target.dataset.id,d=o.target.closest("tr");fetch(`http://localhost:3000/movies/${r}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:prompt("Новий Title:",d.children[1].textContent)||d.children[1].textContent,genre:prompt("Новий Genre:",d.children[2].textContent)||d.children[2].textContent,director:prompt("Новий Director:",d.children[3].textContent)||d.children[3].textContent,year:Number(prompt("Новий Year:",d.children[4].textContent))||Number(d.children[4].textContent)})}).then(t=>{if(!t.ok)throw Error("Помилка оновлення");return t.json()}).then(()=>t()).then(t=>e(t,n)).catch(t=>console.error(t))}})}(),function(){let n=document.querySelector("#moviesTable tbody"),o=document.getElementById("editModal"),r=document.getElementById("editMovieForm"),d=document.getElementById("closeModal");n.addEventListener("click",t=>{if(t.target.classList.contains("editBtn")){let e=t.target.dataset.id,n=t.target.closest("tr");r.elements.id.value=e,r.elements.title.value=n.children[1].textContent,r.elements.genre.value=n.children[2].textContent,r.elements.director.value=n.children[3].textContent,r.elements.year.value=n.children[4].textContent,o.style.display="block"}}),r.addEventListener("submit",d=>{d.preventDefault();let i=new FormData(r),l=i.get("id");fetch(`http://localhost:3000/movies/${l}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:i.get("title"),genre:i.get("genre"),director:i.get("director"),year:Number(i.get("year"))})}).then(t=>{if(!t.ok)throw Error("Помилка часткового оновлення фільмів");return t.json()}).then(()=>t()).then(t=>e(t,n)).catch(t=>console.error(t)),o.style.display="none"}),d.addEventListener("click",()=>{o.style.display="none"})}(),function(){let n=document.querySelector("#moviesTable tbody");n.addEventListener("click",o=>{if(o.target.classList.contains("deleteBtn")){let r=o.target.dataset.id;confirm("Видалити фільм?")&&fetch(`http://localhost:3000/movies/${r}`,{method:"DELETE"}).then(t=>{if(!t.ok)throw Error("Помилка видалення фільму");return t.json()}).then(()=>t()).then(t=>e(t,n)).catch(t=>console.error(t))}})}();
//# sourceMappingURL=index.c101b15b.js.map
